# ðŸ“¦ Laravel Filters â€” Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ Ð´Ð»Ñ Eloquent Ð¸ Query Builder

> ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹, Ð¼Ð¾Ñ‰Ð½Ñ‹Ð¹ Ð¸ Ð³Ð¸Ð±ÐºÐ¸Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ Ð´Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸, ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¸ Ð¿Ð¾Ð¸ÑÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² Laravel Ñ‡ÐµÑ€ÐµÐ· URL-Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹.

**Laravel Filters** Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð²Ð°Ð¼ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ API-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð±ÐµÐ· Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ñ€ÑƒÑ‡Ð½Ñ‹Ñ… `where`, `with`, `has`, `orderBy` Ð¸ Ñ‚.Ð´. â€” Ð²ÑÑ‘ Ð´ÐµÐ»Ð°ÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· URL-Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹. ÐŸÐ¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ðº, API, Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ð¾Ð² Ð¸ Ð»ÑŽÐ±Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼ Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸.

---

## âœ… Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

| Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|--------|----------|
| ðŸ” **Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ð¿Ð¾Ð»ÑÐ¼** | `?filterEQ[status]=active&filterEQ[category_id]=5` |
| ðŸ§© **Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾ ÑÐ²ÑÐ·ÑÐ¼ (whereHas)** | `?filterEQ[category.name]=Books&filterLIKE[user.email]=@gmail.com` |
| ðŸ”— **Eager loading (`with`)** | `?extends=user,posts` |
| ðŸ“Š **ÐŸÐ¾Ð´ÑÑ‡Ñ‘Ñ‚ ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ñ… Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ (`withCount`)** | `?extendsCount=comments,likes` |
| âš–ï¸ **ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼ Ð¿Ð¾Ð»ÑÐ¼ (`filterQ`)** (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ ÐºÐ°ÐºÐ¸Ð¼ Ð¿Ð¾Ð»ÑÐ¼) | `?filterQ=John` â€” Ð¸Ñ‰ÐµÑ‚ Ð¿Ð¾ `name`, `email`, `phone` |
| ðŸ” **Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐ²ÑÐ·ÐµÐ¹ (`doesntHave`)** | `?doesntHave=posts` â€” Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð±ÐµÐ· Ð¿Ð¾ÑÑ‚Ð¾Ð² |
| ðŸ“ **Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°** | `?sort=-created_at,name` â€” Ð¿Ð¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ/Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ |
| ðŸ“‘ **ÐŸÐ°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ** | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ñ `?limit=20` |

---

## ðŸ›  Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

```bash
composer require rostislav/laravel-filters

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

use Illuminate\Http\Request;
use Rostislav\LaravelFilters\Filter;

// Ð’ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ðµ:
public function index(Request $request) // Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ°
{
    return Filter::all(
        $request,                     // Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
        Post::class,                  // ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð¸Ð»Ð¸ QueryBuilder
        ['name', 'email', 'status'],  // Ð Ð°Ð·Ñ€ÐµÑˆÑ‘Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾Ð»Ñ
        [],                           // Ð’Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ (ÑÐ¼. Ð½Ð¸Ð¶Ðµ)
        ['title', 'LIKE'],            // ÐŸÐ¾Ð»Ñ Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ° filterQ
        ['name', 'LIKE', 'category'], // ÐŸÐ¾Ð¸ÑÐº Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ Ð¿Ð¾ ÑÐ²ÑÐ·Ð¸ Ñ category
        ['content', 'LIKE'],
    );
}

public function show(Request $request, int $id) // Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¾Ð´Ð½Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸
{
    return Filter::one(
        $request,                           // Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
        Post::class,                        // ÐœÐ¾Ð´ÐµÐ»ÑŒ
        $id,                                // Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€
        [['email', 'like', '@company.com']] // Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ
    );
}

## Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹:
Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ: filterEQ[title]=name
Ð’ ORM - Post::where('title', 'name')

Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ:
EQ - =
NEQ - !=
EQN - IS NULL
NEQN - IS NOT NULL
GEQ - >=
LEQ - <=
GE - >
LE - <
LIKE - <
IN - in
NotIN - not in

